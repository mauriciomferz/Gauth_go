<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAuth Power-of-Attorney Protocol (P*P) - Enterprise Demo</title>
    <style>
        :root {
            --primary-color: #1976d2;
            --secondary-color: #dc004e;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --error-color: #f44336;
            --background-color: #f5f5f5;
            --card-background: #ffffff;
            --text-primary: #333333;
            --text-secondary: #666666;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .paradigm-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 3rem 0;
        }

        .paradigm-card {
            background: var(--card-background);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 3px solid;
            position: relative;
        }

        .paradigm-card.traditional {
            border-color: var(--error-color);
        }

        .paradigm-card.gauth {
            border-color: var(--success-color);
        }

        .paradigm-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .paradigm-card.traditional h3 {
            color: var(--error-color);
        }

        .paradigm-card.gauth h3 {
            color: var(--success-color);
        }

        .paradigm-card .flow {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            border-left: 4px solid;
        }

        .paradigm-card.traditional .flow {
            border-left-color: var(--error-color);
        }

        .paradigm-card.gauth .flow {
            border-left-color: var(--success-color);
        }

        .paradigm-card ul {
            list-style: none;
            padding-left: 0;
        }

        .paradigm-card li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .paradigm-card li::before {
            content: "•";
            position: absolute;
            left: 0;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .paradigm-card.traditional li::before {
            color: var(--error-color);
        }

        .paradigm-card.gauth li::before {
            color: var(--success-color);
        }

        .alert {
            padding: 1.5rem;
            border-radius: 8px;
            margin: 2rem 0;
            border-left: 6px solid;
        }

        .alert.warning {
            background: #fff3cd;
            border-left-color: var(--warning-color);
            color: #856404;
        }

        .alert.info {
            background: #d1ecf1;
            border-left-color: var(--primary-color);
            color: #0c5460;
        }

        .alert.success {
            background: #d4edda;
            border-left-color: var(--success-color);
            color: #155724;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .demo-card {
            background: var(--card-background);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-top: 4px solid var(--primary-color);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .demo-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }

        .demo-card h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.2s;
            margin: 0.5rem 0.5rem 0.5rem 0;
        }

        .btn:hover {
            background: #1565c0;
        }

        .btn.secondary {
            background: var(--secondary-color);
        }

        .btn.secondary:hover {
            background: #c51162;
        }

        .btn.success {
            background: var(--success-color);
        }

        .btn.success:hover {
            background: #388e3c;
        }

        .chip {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: var(--primary-color);
            color: white;
            border-radius: 16px;
            font-size: 0.8rem;
            margin: 0.25rem;
        }

        .chip.success {
            background: var(--success-color);
        }

        .chip.warning {
            background: var(--warning-color);
        }

        .chip.error {
            background: var(--error-color);
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .metric-card {
            background: var(--card-background);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .metric-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .metric-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .footer {
            background: var(--text-primary);
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-top: 4rem;
        }

        @media (max-width: 768px) {
            .paradigm-comparison {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 1rem;
            }
        }

        .icon {
            width: 24px;
            height: 24px;
            display: inline-block;
            vertical-align: middle;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 0.5rem;
        }

        .status-indicator.active {
            background: var(--success-color);
        }

        .status-indicator.pending {
            background: var(--warning-color);
        }

        .status-indicator.inactive {
            background: var(--error-color);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <h1>🚀 GAuth Power-of-Attorney Protocol (P*P)</h1>
        <p>
            <strong>Enterprise Demo:</strong> Revolutionary shift from IT-managed policies to business-managed power delegation.
            The first "P" stands for <strong>POWER-OF-ATTORNEY</strong>, not policies!
        </p>
    </header>

    <div class="container">
        <!-- Paradigm Shift Alert -->
        <div class="alert warning">
            <h3>🎯 <strong>CRITICAL PARADIGM SHIFT</strong></h3>
            <p>
                GAuth represents a <strong>fundamental transformation</strong> from traditional IT authorization models:
                <br><br>
                <strong>Traditional:</strong> IT creates policies → Technical rules → IT responsible
                <br>
                <strong>GAuth P*P:</strong> Business owners delegate powers → Legal frameworks → Business accountable
            </p>
        </div>

        <!-- Key Metrics -->
        <div class="metrics">
            <div class="metric-card">
                <div class="metric-number">23</div>
                <div class="metric-label">Active Power Delegations</div>
            </div>
            <div class="metric-card">
                <div class="metric-number">8</div>
                <div class="metric-label">Business Owners</div>
            </div>
            <div class="metric-card">
                <div class="metric-number">156</div>
                <div class="metric-label">RFC111/115 Authorizations</div>
            </div>
            <div class="metric-card">
                <div class="metric-number">100%</div>
                <div class="metric-label">Compliance Rate</div>
            </div>
        </div>

        <!-- Paradigm Comparison -->
        <div class="paradigm-comparison">
            <div class="paradigm-card traditional">
                <h3>❌ Traditional IT Model (Replaced)</h3>
                <h4>Policy-based Permission (P*P)</h4>
                
                <div class="flow">
                    User Request → IT Policy Engine → Technical Evaluation → Access Granted/Denied
                </div>

                <h5>Key Characteristics:</h5>
                <ul>
                    <li>IT creates and manages <strong>policies</strong></li>
                    <li>Technical rules govern access decisions</li>
                    <li>IT department is <strong>responsible</strong></li>
                    <li>Administrative control by technical teams</li>
                    <li>Policy enforcement through technical mechanisms</li>
                </ul>
            </div>

            <div class="paradigm-card gauth">
                <h3>✅ GAuth P*P Model (Revolutionary)</h3>
                <h4>Power-of-Attorney Protocol (P*P)</h4>
                
                <div class="flow">
                    Business Owner → Power Delegation → Legal Validation → Authority Exercised
                </div>

                <h5>Key Characteristics:</h5>
                <ul>
                    <li>Business owners delegate specific <strong>powers</strong></li>
                    <li>Legal frameworks govern authorization decisions</li>
                    <li>Business owners are <strong>accountable</strong></li>
                    <li>Functional control by business teams</li>
                    <li>Power delegation through legal mechanisms</li>
                </ul>
            </div>
        </div>

        <!-- RFC Implementation Demos -->
        <div class="alert success">
            <h3>🎯 Live RFC111 & RFC115 Implementation</h3>
            <p>The backend server is currently running with full Power-of-Attorney Protocol implementation. Test the live APIs:</p>
        </div>

        <div class="demo-grid">
            <div class="demo-card">
                <h4>🏢 RFC111: AI Power-of-Attorney</h4>
                <p>
                    Demonstrates how a CFO delegates financial authority to an AI assistant through 
                    legal power-of-attorney frameworks, maintaining business accountability.
                </p>
                <div style="margin: 1rem 0;">
                    <span class="chip success">Business Context</span>
                    <span class="chip">Legal Framework</span>
                    <span class="chip warning">CFO Accountable</span>
                </div>
                <button class="btn" onclick="testRFC111()">Test RFC111 Authorization</button>
            </div>

            <div class="demo-card">
                <h4>⚖️ RFC115: Enhanced Delegation</h4>
                <p>
                    Advanced business power delegation with multi-signature attestation requirements, 
                    time-bound validity, and enhanced compliance monitoring.
                </p>
                <div style="margin: 1rem 0;">
                    <span class="chip">Multi-Signature</span>
                    <span class="chip warning">Time-Bound</span>
                    <span class="chip success">Enhanced Compliance</span>
                </div>
                <button class="btn secondary" onclick="testRFC115()">Test RFC115 Delegation</button>
            </div>

            <div class="demo-card">
                <h4>🔐 Enhanced Token Management</h4>
                <p>
                    AI-specific token creation with delegation metadata, business restrictions, 
                    and legal framework compliance validation.
                </p>
                <div style="margin: 1rem 0;">
                    <span class="chip">AI Metadata</span>
                    <span class="chip success">Business Rules</span>
                    <span class="chip warning">Legal Validation</span>
                </div>
                <button class="btn success" onclick="testEnhancedTokens()">Test Enhanced Tokens</button>
            </div>
        </div>

        <!-- Live Status -->
        <div class="alert info">
            <h3>🔄 Real-Time P*P Operations</h3>
            <div style="margin: 1rem 0;">
                <div><span class="status-indicator active"></span>Backend Server: <strong>Active</strong> (localhost:8080)</div>
                <div><span class="status-indicator active"></span>RFC111 Endpoints: <strong>Operational</strong></div>
                <div><span class="status-indicator active"></span>RFC115 Endpoints: <strong>Operational</strong></div>
                <div><span class="status-indicator active"></span>Power Delegation Registry: <strong>Ready</strong></div>
                <div><span class="status-indicator active"></span>Legal Framework Validation: <strong>Active</strong></div>
            </div>
        </div>

        <!-- Recent Power Delegations -->
        <div class="demo-card">
            <h4>📋 Recent Power Delegations</h4>
            <div style="margin: 1rem 0;">
                <div style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">
                    <strong>CFO → AI Financial Assistant (RFC111)</strong>
                    <span class="chip success">Active</span>
                    <br>
                    <small style="color: var(--text-secondary);">Corporate financial authority delegation - $500k limit</small>
                </div>
                <div style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">
                    <strong>Board Chair → Governance AI (RFC115)</strong>
                    <span class="chip warning">Attestation Required</span>
                    <br>
                    <small style="color: var(--text-secondary);">Enhanced delegation with multi-signature requirements</small>
                </div>
                <div style="padding: 0.5rem 0;">
                    <strong>Legal Counsel → Contract AI (RFC111)</strong>
                    <span class="chip">Pending Validation</span>
                    <br>
                    <small style="color: var(--text-secondary);">Legal contract authority delegation - jurisdiction validation</small>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>
                <strong>GAuth Power-of-Attorney Protocol (P*P)</strong><br>
                Revolutionary authorization through business power delegation, not IT policies.<br>
                <em>Where the first "P" truly means POWER-OF-ATTORNEY!</em>
            </p>
        </div>
    </footer>

    <script>
        // Live API testing functions
        async function testRFC111() {
            const button = event.target;
            button.textContent = 'Testing RFC111...';
            button.disabled = true;

            try {
                const response = await fetch('http://localhost:8080/api/v1/rfc111/authorize', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        client_id: "cfo_ai_assistant",
                        response_type: "code",
                        scope: ["financial_power_of_attorney", "corporate_transactions", "regulatory_compliance"],
                        redirect_uri: "http://localhost:3000/callback",
                        power_type: "corporate_financial_authority",
                        principal_id: "cfo_jane_smith",
                        ai_agent_id: "corporate_ai_assistant_v3",
                        jurisdiction: "US",
                        legal_basis: "corporate_power_of_attorney_act_2024",
                        business_owner: {
                            owner_id: "cfo_jane_smith",
                            role: "Chief Financial Officer",
                            department: "Finance",
                            delegation_authority: "corporate_financial_powers",
                            accountability_level: "executive"
                        },
                        legal_framework: {
                            jurisdiction: "US",
                            entity_type: "corporation",
                            capacity_verification: true,
                            business_accountability_rules: ["executive_oversight", "board_reporting", "regulatory_compliance"]
                        },
                        delegated_powers: ["authorize_payments", "sign_contracts", "manage_investments", "regulatory_filings"],
                        business_restrictions: {
                            amount_limit: 500000,
                            geo_restrictions: ["US", "EU"],
                            business_hours_only: true,
                            approval_threshold: 100000,
                            executive_oversight_required: true
                        }
                    }),
                });

                const data = await response.json();
                
                if (data.code) {
                    alert(`✅ RFC111 Success!\n\nAuthorization Code: ${data.code}\n\nCompliance Level: ${data.compliance_status?.compliance_level}\nLegal Validation: ${data.legal_validation?.valid ? 'Valid' : 'Invalid'}\n\n🎯 Business Owner (CFO) successfully delegated financial authority to AI assistant!`);
                } else {
                    alert(`❌ RFC111 Error: ${JSON.stringify(data, null, 2)}`);
                }
            } catch (error) {
                alert(`❌ RFC111 Connection Error: ${error.message}\n\nMake sure the backend server is running on localhost:8080`);
            } finally {
                button.textContent = 'Test RFC111 Authorization';
                button.disabled = false;
            }
        }

        async function testRFC115() {
            const button = event.target;
            button.textContent = 'Testing RFC115...';
            button.disabled = true;

            try {
                const response = await fetch('http://localhost:8080/api/v1/rfc115/delegation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        principal_id: "board_chair_robert_wilson",
                        delegate_id: "governance_ai_system",
                        power_type: "corporate_governance_delegation",
                        scope: ["board_resolutions", "shareholder_communications", "regulatory_filings", "compliance_monitoring"],
                        business_owner: {
                            owner_id: "board_chair_robert_wilson",
                            role: "Chairman of the Board",
                            department: "Corporate Governance",
                            delegation_authority: "fiduciary_powers",
                            accountability_level: "board_fiduciary"
                        },
                        power_restrictions: {
                            amount_limit: 1000000,
                            geo_restrictions: ["US", "EU", "CA"],
                            business_hours_only: false,
                            board_oversight_required: true,
                            fiduciary_compliance: true
                        },
                        attestation_requirement: {
                            type: "board_resolution_signature",
                            level: "fiduciary_enhanced",
                            multi_signature: true,
                            attesters: ["board_secretary", "legal_counsel", "compliance_officer"],
                            business_witnesses: ["independent_director", "audit_committee_chair"]
                        },
                        validity_period: {
                            start_time: "2025-09-23T15:00:00Z",
                            end_time: "2026-09-23T15:00:00Z",
                            business_review_periods: [{
                                quarterly_review: true,
                                board_approval_renewal: true,
                                fiduciary_assessment: true
                            }],
                            governance_constraints: ["board_oversight", "shareholder_transparency"]
                        },
                        jurisdiction: "US",
                        legal_basis: "corporate_fiduciary_responsibility_act_2024"
                    }),
                });

                const data = await response.json();
                
                if (data.delegation_id) {
                    alert(`✅ RFC115 Success!\n\nDelegation ID: ${data.delegation_id}\n\nCompliance Level: ${data.compliance_status?.compliance_level}\nAttestation Level: ${data.enhanced_token?.attestations?.[0]?.trust_level}\n\n⚖️ Board Chair successfully delegated governance powers with enhanced attestation!`);
                } else {
                    alert(`❌ RFC115 Error: ${JSON.stringify(data, null, 2)}`);
                }
            } catch (error) {
                alert(`❌ RFC115 Connection Error: ${error.message}\n\nMake sure the backend server is running on localhost:8080`);
            } finally {
                button.textContent = 'Test RFC115 Delegation';
                button.disabled = false;
            }
        }

        async function testEnhancedTokens() {
            const button = event.target;
            button.textContent = 'Testing Enhanced Tokens...';
            button.disabled = true;

            try {
                const response = await fetch('http://localhost:8080/api/v1/tokens/enhanced', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        subject: "ai_financial_agent",
                        scope: ["portfolio_management", "risk_assessment", "compliance_monitoring"],
                        ai_metadata: {
                            model_id: "gpt-4-financial",
                            version: "1.2.3",
                            capabilities: ["financial_analysis", "regulatory_compliance", "risk_modeling"],
                            restrictions: {
                                max_transaction_amount: 250000,
                                allowed_markets: ["NYSE", "NASDAQ", "LSE"]
                            }
                        },
                        delegation_scope: "ai_portfolio_management",
                        legal_framework: {
                            jurisdiction: "US",
                            entity_type: "investment_firm",
                            regulatory_compliance: ["SEC", "FINRA", "CFTC"]
                        }
                    }),
                });

                const data = await response.json();
                
                if (data.id) {
                    alert(`✅ Enhanced Token Success!\n\nToken ID: ${data.id}\n\nSubject: ${data.subject}\nCompliance Status: ${data.compliance_status}\nAI Capabilities: ${data.ai?.capabilities?.join(', ')}\n\n🔐 Enhanced token created with AI-specific metadata and business restrictions!`);
                } else {
                    alert(`❌ Enhanced Token Error: ${JSON.stringify(data, null, 2)}`);
                }
            } catch (error) {
                alert(`❌ Enhanced Token Connection Error: ${error.message}\n\nMake sure the backend server is running on localhost:8080`);
            } finally {
                button.textContent = 'Test Enhanced Tokens';
                button.disabled = false;
            }
        }

        // Check backend connectivity on page load
        window.addEventListener('load', async () => {
            try {
                const response = await fetch('http://localhost:8080/health');
                const data = await response.json();
                if (data.status === 'ok') {
                    console.log('✅ GAuth P*P Backend is operational!');
                    // You could update status indicators here
                }
            } catch (error) {
                console.log('⚠️ Backend not accessible - demo will work in offline mode');
                // Update status indicators to show offline mode
                document.querySelectorAll('.status-indicator').forEach(indicator => {
                    indicator.className = 'status-indicator pending';
                });
            }
        });
    </script>
</body>
</html>