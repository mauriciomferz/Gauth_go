<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAuth Protocol - Interactive Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        .code-block {
            background: #1a202c;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
            max-height: 300px;
            overflow-y: auto;
        }
        .metric-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .pulse-dot {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .notification {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen text-white">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-6xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
                üîê GAuth Protocol
            </h1>
            <p class="text-2xl text-gray-200 mb-6">Interactive Authentication & Authorization Demo</p>
            <div class="flex justify-center flex-wrap gap-3">
                <span class="bg-green-500 px-4 py-2 rounded-full text-sm font-medium shadow-lg">‚úÖ Token Management</span>
                <span class="bg-blue-500 px-4 py-2 rounded-full text-sm font-medium shadow-lg">üîÑ Key Rotation</span>
                <span class="bg-purple-500 px-4 py-2 rounded-full text-sm font-medium shadow-lg">üìä Real-time Monitoring</span>
                <span class="bg-yellow-500 px-4 py-2 rounded-full text-sm font-medium shadow-lg">‚öñÔ∏è RFC111 Compliance</span>
                <span class="bg-indigo-500 px-4 py-2 rounded-full text-sm font-medium shadow-lg">üåê WebSocket Live Updates</span>
            </div>
        </header>

        <!-- Status Dashboard -->
        <div class="glass-card rounded-xl p-6 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-center">üåê System Status</h2>
            <div class="grid md:grid-cols-3 gap-6">
                <div class="text-center">
                    <div class="pulse-dot inline-block w-4 h-4 rounded-full mb-2" id="status-dot"></div>
                    <p class="text-lg font-medium">API Health</p>
                    <p id="health-status" class="text-xl font-bold text-yellow-400">Checking...</p>
                </div>
                <div class="text-center">
                    <div class="pulse-dot inline-block w-4 h-4 rounded-full mb-2" id="ws-dot"></div>
                    <p class="text-lg font-medium">WebSocket</p>
                    <p id="ws-status" class="text-xl font-bold text-yellow-400">Connecting...</p>
                </div>
                <div class="text-center">
                    <div class="inline-block w-4 h-4 bg-blue-400 rounded-full mb-2"></div>
                    <p class="text-lg font-medium">Server Time</p>
                    <p id="server-time" class="text-lg font-mono text-blue-400">-</p>
                </div>
            </div>
        </div>

        <!-- Live Metrics -->
        <div class="glass-card rounded-xl p-6 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-center">üìä Live System Metrics</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="metric-card rounded-lg p-4 text-center">
                    <div class="text-4xl font-bold text-blue-400 mb-2" id="active-users">-</div>
                    <div class="text-sm text-gray-300">Active Users</div>
                </div>
                <div class="metric-card rounded-lg p-4 text-center">
                    <div class="text-4xl font-bold text-green-400 mb-2" id="total-transactions">-</div>
                    <div class="text-sm text-gray-300">Transactions</div>
                </div>
                <div class="metric-card rounded-lg p-4 text-center">
                    <div class="text-4xl font-bold text-purple-400 mb-2" id="success-rate">-</div>
                    <div class="text-sm text-gray-300">Success Rate</div>
                </div>
                <div class="metric-card rounded-lg p-4 text-center">
                    <div class="text-4xl font-bold text-yellow-400 mb-2" id="response-time">-</div>
                    <div class="text-sm text-gray-300">Response (ms)</div>
                </div>
            </div>
        </div>

        <!-- Real-time Events -->
        <div class="glass-card rounded-xl p-6 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-center">üîî Real-time Events</h2>
            <div id="realtime-events" class="space-y-2 max-h-64 overflow-y-auto">
                <div class="text-gray-400 text-center py-4">
                    Waiting for real-time events... Try creating or validating tokens!
                </div>
            </div>
        </div>

        <!-- API Status -->
        <div class="card rounded-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4">üåê API Status</h2>
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <p class="mb-2"><strong>Health Status:</strong> <span id="health-status" class="text-yellow-400">Checking...</span></p>
                    <p class="mb-2"><strong>Server:</strong> <span class="text-green-400">http://localhost:8080</span></p>
                </div>
                <div>
                    <p class="mb-2"><strong>Timestamp:</strong> <span id="server-time" class="text-blue-400">-</span></p>
                    <p class="mb-2"><strong>Uptime:</strong> <span class="text-purple-400">Active</span></p>
                </div>
            </div>
        </div>

        <!-- Token Management Demo -->
        <div class="card rounded-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4">üé´ Token Management</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-semibold mb-3">Create Token</h3>
                    <div class="space-y-3">
                        <input type="text" id="token-subject" placeholder="Subject (e.g., demo_user)" 
                               class="w-full px-3 py-2 bg-white bg-opacity-20 rounded border border-white border-opacity-30 text-white placeholder-gray-300">
                        <input type="text" id="token-role" placeholder="Role (e.g., admin)" 
                               class="w-full px-3 py-2 bg-white bg-opacity-20 rounded border border-white border-opacity-30 text-white placeholder-gray-300">
                        <button onclick="createToken()" 
                                class="w-full bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded font-medium">
                            Create Token
                        </button>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-3">Token Output</h3>
                    <div id="token-output" class="code-block min-h-[120px]">
                        Click "Create Token" to generate a new token...
                    </div>
                </div>
            </div>
            
            <div class="mt-6">
                <h3 class="text-lg font-semibold mb-3">Validate Token</h3>
                <div class="flex space-x-3">
                    <input type="text" id="validate-token" placeholder="Paste token here..." 
                           class="flex-1 px-3 py-2 bg-white bg-opacity-20 rounded border border-white border-opacity-30 text-white placeholder-gray-300">
                    <button onclick="validateToken()" 
                            class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded font-medium">
                        Validate
                    </button>
                </div>
                <div id="validation-output" class="code-block mt-3 min-h-[60px]">
                    Token validation results will appear here...
                </div>
            </div>
        </div>

        <!-- System Metrics -->
        <div class="card rounded-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4">üìä System Metrics</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="text-center">
                    <div class="text-3xl font-bold text-blue-400" id="active-users">-</div>
                    <div class="text-sm text-gray-300">Active Users</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-green-400" id="total-transactions">-</div>
                    <div class="text-sm text-gray-300">Total Transactions</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-purple-400" id="success-rate">-</div>
                    <div class="text-sm text-gray-300">Success Rate</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-yellow-400" id="response-time">-</div>
                    <div class="text-sm text-gray-300">Avg Response (ms)</div>
                </div>
            </div>
        </div>

        <!-- Demo Scenarios -->
        <div class="card rounded-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4">üé≠ Demo Scenarios</h2>
            <div id="scenarios-list" class="space-y-4">
                <div class="text-center text-gray-300">Loading scenarios...</div>
            </div>
        </div>

        <!-- Legal Framework -->
        <div class="card rounded-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4">‚öñÔ∏è Legal Framework</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-semibold mb-3">Supported Jurisdictions</h3>
                    <div id="jurisdictions-list" class="space-y-2">
                        <div class="text-gray-300">Loading jurisdictions...</div>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-3">RFC111/RFC115 Compliance</h3>
                    <div class="space-y-2">
                        <div class="flex items-center space-x-2">
                            <span class="text-green-400">‚úÖ</span>
                            <span>Power of Attorney Protocol</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-green-400">‚úÖ</span>
                            <span>Legal Entity Management</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-green-400">‚úÖ</span>
                            <span>Compliance Auditing</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-green-400">‚úÖ</span>
                            <span>Multi-Jurisdiction Support</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-gray-300">
            <p>&copy; 2024 GAuth Protocol Demo - Enhanced Authentication & Authorization Framework</p>
            <p class="text-sm mt-2">Built with Go, React, and modern web technologies</p>
        </footer>
    </div>

    <script>
        // Configuration
        const API_BASE = 'http://localhost:8080/api/v1';
        const WS_URL = `ws://${window.location.host}/ws`;
        
        // Global state
        let ws = null;
        let wsReconnectCount = 0;
        let maxReconnectAttempts = 5;
        
        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ GAuth Demo App Initializing...');
            initializeApp();
            setInterval(loadSystemMetrics, 5000);
            setInterval(updateServerTime, 1000);
        });

        async function initializeApp() {
            try {
                await checkHealth();
                await loadSystemMetrics();
                await loadJurisdictions();
                connectWebSocket();
                console.log('‚úÖ App initialized successfully');
            } catch (error) {
                console.error('‚ùå App initialization failed:', error);
                showNotification('Failed to initialize app', 'error');
            }
        }

        // WebSocket Management
        function connectWebSocket() {
            console.log('üîå Connecting to WebSocket...');
            ws = new WebSocket(WS_URL);
            
            ws.onopen = function() {
                console.log('‚úÖ WebSocket connected');
                document.getElementById('ws-status').textContent = 'üü¢ Connected';
                document.getElementById('ws-status').className = 'text-xl font-bold text-green-400';
                document.getElementById('ws-dot').className = 'pulse-dot inline-block w-4 h-4 bg-green-400 rounded-full mb-2';
                wsReconnectCount = 0;
                showNotification('WebSocket connected - Real-time updates enabled!', 'success');
            };
            
            ws.onmessage = function(event) {
                try {
                    const data = JSON.parse(event.data);
                    handleWebSocketMessage(data);
                } catch (error) {
                    console.error('Failed to parse WebSocket message:', error);
                }
            };
            
            ws.onclose = function() {
                console.log('‚ùå WebSocket disconnected');
                document.getElementById('ws-status').textContent = 'üî¥ Disconnected';
                document.getElementById('ws-status').className = 'text-xl font-bold text-red-400';
                document.getElementById('ws-dot').className = 'pulse-dot inline-block w-4 h-4 bg-red-400 rounded-full mb-2';
                
                if (wsReconnectCount < maxReconnectAttempts) {
                    const delay = Math.pow(2, wsReconnectCount) * 1000;
                    console.log(`üîÑ Reconnecting in ${delay}ms...`);
                    setTimeout(connectWebSocket, delay);
                    wsReconnectCount++;
                }
            };
            
            ws.onerror = function(error) {
                console.error('‚ùå WebSocket error:', error);
                document.getElementById('ws-status').textContent = '‚ö†Ô∏è Error';
                document.getElementById('ws-status').className = 'text-xl font-bold text-yellow-400';
            };
        }

        function handleWebSocketMessage(data) {
            console.log('üì® WebSocket message:', data);
            switch (data.type) {
                case 'metrics_update':
                    updateMetricsDisplay(data.data);
                    break;
                case 'token_created':
                    showRealtimeEvent('üé´ Token Created', data.data, 'success');
                    break;
                case 'token_validated':
                    showRealtimeEvent('üîç Token Validated', data.data, 'info');
                    break;
            }
        }

        // API Functions
        async function checkHealth() {
            try {
                const response = await fetch('http://localhost:8080/health');
                const data = await response.json();
                
                document.getElementById('health-status').textContent = 'üü¢ Healthy';
                document.getElementById('health-status').className = 'text-xl font-bold text-green-400';
                document.getElementById('status-dot').className = 'pulse-dot inline-block w-4 h-4 bg-green-400 rounded-full mb-2';
                
                updateServerTime(data.timestamp);
                return data;
            } catch (error) {
                console.error('‚ùå Health check failed:', error);
                document.getElementById('health-status').textContent = 'üî¥ Error';
                document.getElementById('health-status').className = 'text-xl font-bold text-red-400';
                document.getElementById('status-dot').className = 'pulse-dot inline-block w-4 h-4 bg-red-400 rounded-full mb-2';
                throw error;
            }
        }

        // Load system metrics
        async function loadSystemMetrics() {
            try {
                const response = await fetch(`${API_BASE}/metrics/system`);
                const data = await response.json();
                
                document.getElementById('active-users').textContent = data.active_users;
                document.getElementById('total-transactions').textContent = data.total_transactions.toLocaleString();
                document.getElementById('success-rate').textContent = (data.success_rate * 100).toFixed(1) + '%';
                document.getElementById('response-time').textContent = data.average_response_time;
            } catch (error) {
                console.error('Failed to load metrics:', error);
            }
        }

        // Load demo scenarios
        async function loadScenarios() {
            try {
                const response = await fetch(`${API_BASE}/demo/scenarios`);
                const data = await response.json();
                
                const container = document.getElementById('scenarios-list');
                container.innerHTML = data.scenarios.map(scenario => `
                    <div class="bg-white bg-opacity-10 p-4 rounded-lg">
                        <h4 class="font-semibold text-lg">${scenario.name}</h4>
                        <p class="text-gray-300 text-sm mt-1">${scenario.description}</p>
                        <div class="mt-2">
                            <span class="px-2 py-1 bg-blue-500 text-xs rounded">${scenario.status}</span>
                            <span class="px-2 py-1 bg-gray-600 text-xs rounded ml-2">${scenario.steps.length} steps</span>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Failed to load scenarios:', error);
            }
        }

        // Load jurisdictions
        async function loadJurisdictions() {
            try {
                const response = await fetch(`${API_BASE}/legal/jurisdictions`);
                const data = await response.json();
                
                const container = document.getElementById('jurisdictions-list');
                container.innerHTML = data.jurisdictions.map(jurisdiction => `
                    <div class="flex justify-between items-center bg-white bg-opacity-10 p-2 rounded">
                        <span>${jurisdiction.name}</span>
                        <span class="text-sm text-gray-400">${jurisdiction.type}</span>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Failed to load jurisdictions:', error);
            }
        }

        // Token Management
        async function createToken() {
            const subject = document.getElementById('token-subject').value || 'demo_user';
            const role = document.getElementById('token-role').value || 'user';
            
            const payload = {
                claims: {
                    sub: subject,
                    role: role,
                    iat: Math.floor(Date.now() / 1000),
                    demo: true
                },
                duration: 3600000000000 // 1 hour in nanoseconds
            };

            try {
                showLoading('token-output', 'Creating token...');
                
                const response = await fetch(`${API_BASE}/tokens`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'Failed to create token');
                }
                
                const data = await response.json();
                
                document.getElementById('token-output').innerHTML = `
                    <div class="text-green-400 font-bold mb-2">‚úÖ Token Created Successfully!</div>
                    <div class="space-y-2">
                        <div><strong class="text-blue-300">Subject:</strong> ${data.claims?.sub || subject}</div>
                        <div><strong class="text-purple-300">Role:</strong> ${data.claims?.role || role}</div>
                        <div><strong class="text-yellow-300">Expires:</strong> ${new Date(data.expires_at).toLocaleString()}</div>
                        <div class="mt-3">
                            <strong class="text-indigo-300">JWT Token:</strong>
                            <div class="mt-1 p-2 bg-black bg-opacity-50 rounded text-xs break-all">${data.token}</div>
                        </div>
                    </div>
                `;
                
                document.getElementById('validate-token').value = data.token;
                showNotification('Token created successfully!', 'success');
                
                // Simulate real-time event
                if (!ws || ws.readyState !== WebSocket.OPEN) {
                    showRealtimeEvent('üé´ Token Created', {
                        subject: subject,
                        role: role,
                        timestamp: new Date().toISOString()
                    }, 'success');
                }
                
            } catch (error) {
                console.error('‚ùå Token creation failed:', error);
                document.getElementById('token-output').innerHTML = `
                    <div class="text-red-400 font-bold">‚ùå Token Creation Failed</div>
                    <div class="text-gray-300 mt-2">${error.message}</div>
                `;
                showNotification('Token creation failed: ' + error.message, 'error');
            }
        }

        async function validateToken() {
            const token = document.getElementById('validate-token').value.trim();
            if (!token) {
                document.getElementById('validation-output').innerHTML = `
                    <div class="text-yellow-400">‚ö†Ô∏è Please enter a token to validate</div>
                `;
                return;
            }

            try {
                showLoading('validation-output', 'Validating token...');
                
                const response = await fetch(`${API_BASE}/tokens/validate`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        access_token: token
                    })
                });
                
                const data = await response.json();
                
                if (data.valid) {
                    document.getElementById('validation-output').innerHTML = `
                        <div class="text-green-400 font-bold mb-2">‚úÖ Token is Valid!</div>
                        <div class="space-y-2">
                            <div><strong class="text-blue-300">Subject:</strong> ${data.claims?.sub || 'N/A'}</div>
                            <div><strong class="text-purple-300">Role:</strong> ${data.claims?.role || 'N/A'}</div>
                            <div><strong class="text-yellow-300">Issued:</strong> ${data.claims?.iat ? new Date(data.claims.iat * 1000).toLocaleString() : 'N/A'}</div>
                            <div class="mt-3">
                                <strong class="text-indigo-300">All Claims:</strong>
                                <pre class="mt-1 text-xs text-gray-300">${JSON.stringify(data.claims, null, 2)}</pre>
                            </div>
                        </div>
                    `;
                    showNotification('Token validated successfully!', 'success');
                } else {
                    document.getElementById('validation-output').innerHTML = `
                        <div class="text-red-400 font-bold mb-2">‚ùå Token is Invalid!</div>
                        <div class="text-gray-300">${data.error || 'Token validation failed'}</div>
                    `;
                    showNotification('Token validation failed', 'error');
                }
                
                // Simulate real-time event
                if (!ws || ws.readyState !== WebSocket.OPEN) {
                    showRealtimeEvent('üîç Token Validated', {
                        valid: data.valid,
                        timestamp: new Date().toISOString()
                    }, data.valid ? 'success' : 'error');
                }
                
            } catch (error) {
                console.error('‚ùå Token validation failed:', error);
                document.getElementById('validation-output').innerHTML = `
                    <div class="text-red-400 font-bold">‚ùå Validation Error</div>
                    <div class="text-gray-300 mt-2">${error.message}</div>
                `;
                showNotification('Validation error: ' + error.message, 'error');
            }
        }

        // Utility Functions
        function updateMetricsDisplay(metrics) {
            if (metrics.active_users !== undefined) {
                document.getElementById('active-users').textContent = metrics.active_users.toLocaleString();
            }
            if (metrics.total_transactions !== undefined) {
                document.getElementById('total-transactions').textContent = metrics.total_transactions.toLocaleString();
            }
            if (metrics.success_rate !== undefined) {
                document.getElementById('success-rate').textContent = (metrics.success_rate * 100).toFixed(1) + '%';
            }
            if (metrics.average_response_time !== undefined) {
                document.getElementById('response-time').textContent = metrics.average_response_time;
            }
        }

        function updateServerTime(timestamp = null) {
            const time = timestamp ? new Date(timestamp * 1000) : new Date();
            document.getElementById('server-time').textContent = time.toLocaleTimeString();
        }

        function showLoading(elementId, message) {
            document.getElementById(elementId).innerHTML = `
                <div class="text-yellow-400">‚è≥ ${message}</div>
            `;
        }

        function showRealtimeEvent(title, data, type = 'info') {
            const container = document.getElementById('realtime-events');
            
            if (container.children.length === 1 && container.children[0].textContent.includes('Waiting for')) {
                container.innerHTML = '';
            }
            
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                warning: 'bg-yellow-500',
                info: 'bg-blue-500'
            };
            
            const notification = document.createElement('div');
            notification.className = `notification ${colors[type] || colors.info} text-white px-4 py-3 rounded-lg mb-2 shadow-lg`;
            notification.innerHTML = `
                <div class="flex justify-between items-start">
                    <div class="flex-1">
                        <div class="font-bold">${title}</div>
                        <div class="text-sm opacity-90 mt-1">${JSON.stringify(data, null, 2)}</div>
                    </div>
                    <div class="text-xs opacity-75 ml-4">${new Date().toLocaleTimeString()}</div>
                </div>
            `;
            
            container.insertBefore(notification, container.firstChild);
            
            while (container.children.length > 10) {
                container.removeChild(container.lastChild);
            }
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.transition = 'opacity 0.3s';
                    notification.style.opacity = '0';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }
            }, 30000);
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 max-w-sm p-4 rounded-lg shadow-lg text-white font-medium`;
            
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                warning: 'bg-yellow-500',
                info: 'bg-blue-500'
            };
            
            notification.classList.add(colors[type] || colors.info);
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transition = 'opacity 0.3s, transform 0.3s';
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 5000);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                const activeElement = document.activeElement;
                if (activeElement.id === 'token-subject' || activeElement.id === 'token-role') {
                    e.preventDefault();
                    createToken();
                } else if (activeElement.id === 'validate-token') {
                    e.preventDefault();
                    validateToken();
                }
            }
        });

        console.log('üéâ GAuth Demo App Ready!');
    </script>
</body>
</html>
